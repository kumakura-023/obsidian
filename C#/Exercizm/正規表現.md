---
created: 2025-11-27T09:12
updated: 2025-12-09T15:09
---
```C#
using System.Text.RegularExpressions;
static class LogLine
{
    public static string Message(string logLine)
    { 
        return logLine.Substring(logLine.IndexOf(":") + 1).Trim();
    }

    public static string LogLevel(string logLine)
    {
        string level = logLine.Substring(0,logLine.IndexOf(":")).Trim();
        return level.Replace("[", "").Replace("]", "").ToLower();
    }

    public static string Reformat(string logLine)
    {
        return Message(logLine) + " (" + LogLevel(logLine) + ")";
    }
}

```

```C#
static class LogLine
{
    public static string Message(string logLine)
    {
        int StartIndex = logLine.IndexOf(":") + 1;
        return logLine.Substring(StartIndex).Trim();
    }
    public static string LogLevel(string logLine)
    {
        int StartIndexError = logLine.IndexOf("[");
        int EndIndexErrror = logLine.IndexOf("]");
        string ErrorOnly = logLine.Substring(StartIndexError+1, EndIndexErrror-1).ToLower();
        
        return ErrorOnly;
    }
    public static string Reformat(string logLine)
    {
        string MessageOnly = Message(logLine);
        string ErrorOnly = LogLevel(logLine);
        return $"{MessageOnly} ({ErrorOnly})";
    }
}
```

## 変数を使った文字列

```C#
$"{MessageOnly} ({ErrorOnly})";
```

## Regex

```C#
public int CountQuotedPasswords(string lines)
    {
        // パターンの意味:
        // "           : 開きダブルクォート
        // [^"]*       : 次の `"` が出るまでの任意の文字列
        // password    : "password"（大小無視オプションをつける）
        // [^"]*       : またダブルクォート以外の文字
        // "           : 閉じダブルクォート
        var pattern = "\"[^\"\n]*password[^\"\n]*\"";

        var matches = Regex.Matches(
            lines,
            pattern,
            RegexOptions.IgnoreCase
        );

        return matches.Count;
    }
```

`[^""]*` は正規表現の世界ではこう読むやつだよ。

- `[` `]` … 文字クラス（ここに書かれた文字のどれか1つにマッチする）
    
- `^` … 文字クラスの先頭にあると「否定」になる  
    → **ここに書かれている文字 _以外_ にマッチする**
    
- `""` … C# の verbatim 文字列（@""）では `""` が `"` の1文字になる  
    → 正規表現的には `"（ダブルクォート）`
    

だから  
`[^""]*` ＝ **ダブルクォート以外の任意の文字を 0 回以上**。


